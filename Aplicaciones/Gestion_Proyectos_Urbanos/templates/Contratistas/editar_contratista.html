{% extends 'base.html' %}

{% block content %}
<div class="container mt-5">
    <h1 class="text-center mb-4">Editar Contratista</h1>

    <div class="card p-4">
        <form action="{% url 'EditarContratista' contratista.id %}" method="post" id="form_editar_contratista">
            {% csrf_token %}
            <div class="mb-3">
                <label for="nombre" class="form-label">Nombre del Contratista</label>
                <input type="text" class="form-control" id="nombre" name="nombre" value="{{ contratista.nombre }}">
            </div>
            <div class="mb-3">
                <label for="cedula" class="form-label">Cédula</label>
                <input type="text" class="form-control" id="cedula" name="cedula" value="{{ contratista.cedula }}" readonly>
            </div>            
            <div class="mb-3">
                <label for="empresa" class="form-label">Empresa</label>
                <input type="text" class="form-control" id="empresa" name="empresa" value="{{ contratista.empresa }}">
            </div>
            <div class="mb-3">
                <label for="telefono" class="form-label">Teléfono</label>
                <input type="text" class="form-control" id="telefono" name="telefono" value="{{ contratista.telefono }}">
            </div>
            <div class="mb-3">
                <label for="email" class="form-label">Email</label>
                <input type="email" class="form-control" id="email" name="email" value="{{ contratista.email }}">
            </div>
            <div class="mb-3">
                <label for="especialidad" class="form-label">Especialidad</label>
                <input type="text" class="form-control" id="especialidad" name="especialidad" value="{{ contratista.especialidad }}">
            </div>
            <div class="text-center">
                <button type="submit" class="btn btn-success">Actualizar</button>
                <a href="{% url 'VerContratistas' %}" class="btn btn-secondary">Cancelar</a>
            </div>
        </form>
    </div>
</div>

<!-- Script para jQuery Validate -->
<script>
    $(document).ready(function () {
        $("#form_editar_contratista").validate({
            rules: {
                nombre: {
                    required: true,
                    minlength: 3,
                    maxlength: 255
                },
                cedula: {
                    required: true,
                    digits: true,
                    minlength: 10,
                    maxlength: 15
                },
                empresa: {
                    required: true,
                    minlength: 3,
                    maxlength: 255
                },
                telefono: {
                    required: true,
                    digits: true,
                    minlength: 7,
                    maxlength: 10
                },
                email: {
                    required: true,
                    email: true
                },
                especialidad: {
                    required: true,
                    minlength: 3,
                    maxlength: 255
                }
            },
            messages: {
                nombre: {
                    required: "Por favor, ingrese el nombre del contratista.",
                    minlength: "El nombre debe tener al menos 3 caracteres.",
                    maxlength: "El nombre no puede tener más de 255 caracteres."
                },
                cedula: {
                    required: "Por favor, ingrese la cédula del contratista.",
                    digits: "Solo se permiten dígitos.",
                    minlength: "La cédula debe tener al menos 10 dígitos.",
                    maxlength: "La cédula no puede tener más de 15 dígitos."
                },
                empresa: {
                    required: "Por favor, ingrese el nombre de la empresa.",
                    minlength: "El nombre de la empresa debe tener al menos 3 caracteres.",
                    maxlength: "El nombre de la empresa no puede tener más de 255 caracteres."
                },
                telefono: {
                    required: "Por favor, ingrese un número de teléfono.",
                    digits: "Solo se permiten números.",
                    minlength: "El teléfono debe tener al menos 7 dígitos.",
                    maxlength: "El teléfono no puede tener más de 10 dígitos."
                },
                email: {
                    required: "Por favor, ingrese un correo electrónico.",
                    email: "Ingrese un correo válido (ejemplo@correo.com)."
                },
                especialidad: {
                    required: "Por favor, ingrese la especialidad del contratista.",
                    minlength: "La especialidad debe tener al menos 3 caracteres.",
                    maxlength: "La especialidad no puede tener más de 255 caracteres."
                }
            },
            errorClass: "is-invalid", // Agrega la clase de Bootstrap para errores
            validClass: "is-valid",   // Agrega la clase de Bootstrap para éxito
            errorPlacement: function(error, element) {
            error.addClass("invalid-feedback"); // Clase para Bootstrap
            element.closest(".mb-3").append(error);
        }
        });
    });
</script>
{% endblock %}
